<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Email Template Builder - Professional Email Designer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #0c0c0c, #1a1a00);
            color: #FFFF00;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px;
            background: linear-gradient(135deg, #111111, #222200);
            border-radius: 20px;
            border: 3px solid #FFFF00;
            box-shadow: 0 10px 30px rgba(255, 255, 0, 0.1);
        }
        
        h1 {
            font-size: 3.2em;
            margin-bottom: 15px;
            color: #FFFF00;
            text-shadow: 0 2px 10px rgba(255, 255, 0, 0.3);
        }
        
        .description {
            color: #cccc00;
            margin-bottom: 10px;
            font-size: 1.3em;
        }
        
        .sub-description {
            color: #999900;
            font-size: 1.1em;
            margin-top: 10px;
        }
        
        .builder-area {
            display: grid;
            grid-template-columns: 320px 1fr 380px;
            gap: 25px;
            margin-bottom: 30px;
            min-height: 850px;
        }
        
        @media (max-width: 1400px) {
            .builder-area {
                grid-template-columns: 1fr;
            }
        }
        
        .components-panel, .preview-panel, .settings-panel {
            background: linear-gradient(135deg, #111111, #1a1a00);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid #333300;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }
        
        h2 {
            color: #FFFF00;
            margin-bottom: 25px;
            border-left: 5px solid #FFFF00;
            padding-left: 20px;
            font-size: 1.8em;
        }
        
        h3 {
            color: #FFFF00;
            margin-bottom: 20px;
            font-size: 1.3em;
        }
        
        .components-grid {
            display: grid;
            gap: 15px;
        }
        
        .component-item {
            background: #000000;
            padding: 20px;
            border: 2px solid #333300;
            border-radius: 12px;
            cursor: grab;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .component-item:hover {
            border-color: #FFFF00;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(255, 255, 0, 0.2);
        }
        
        .component-item:active {
            cursor: grabbing;
        }
        
        .component-icon {
            font-size: 32px;
            margin-bottom: 12px;
            color: #FFFF00;
        }
        
        .component-desc {
            font-size: 0.9em;
            color: #cccc00;
            margin-top: 5px;
        }
        
        .email-preview {
            background: white;
            min-height: 750px;
            border: 3px solid #444400;
            border-radius: 12px;
            padding: 25px;
            overflow-y: auto;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1);
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            color: #000000;
            font-family: Arial, sans-serif;
            min-height: 600px;
            transition: all 0.3s ease;
        }
        
        .email-section {
            border: 2px dashed #cccc00;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            position: relative;
            transition: all 0.3s ease;
            background: rgba(255, 255, 0, 0.02);
        }
        
        .email-section:hover {
            border-color: #FFD700;
            background: rgba(255, 255, 0, 0.05);
        }
        
        .section-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: none;
            gap: 5px;
        }
        
        .email-section:hover .section-controls {
            display: flex;
        }
        
        .control-btn {
            background: #FFFF00;
            color: #000000;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        
        .control-btn:hover {
            background: #FFD700;
            transform: scale(1.05);
        }
        
        .control-btn.delete {
            background: #ff4444;
            color: white;
        }
        
        .control-btn.delete:hover {
            background: #cc0000;
        }
        
        .settings-group {
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #FFFF00;
            font-size: 1.1em;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            background-color: #000000;
            color: #FFFF00;
            border: 2px solid #333300;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 1em;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #FFFF00;
            box-shadow: 0 0 10px rgba(255, 255, 0, 0.3);
        }
        
        .color-picker {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .color-box {
            width: 50px;
            height: 50px;
            border: 2px solid #333300;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .color-box:hover {
            transform: scale(1.1);
        }
        
        .buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        
        button {
            background: #FFFF00;
            color: #000000;
            border: none;
            padding: 18px 25px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        button:hover {
            background: #FFD700;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 255, 0, 0.3);
        }
        
        button.primary {
            background: #00FF00;
            color: #000;
        }
        
        button.primary:hover {
            background: #00CC00;
        }
        
        .template-preview {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
        }
        
        .template-item {
            background: #000000;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid #333300;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .template-item:hover {
            border-color: #FFFF00;
            transform: translateY(-3px);
            background: #111100;
        }
        
        .code-preview {
            background: #1a1a1a;
            color: #00FF00;
            padding: 25px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 25px;
            display: none;
            border: 2px solid #333300;
            line-height: 1.5;
        }
        
        .tab-buttons {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 3px solid #333300;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px 10px 0 0;
            overflow: hidden;
        }
        
        .tab-btn {
            background: transparent;
            color: #FFFF00;
            border: none;
            padding: 15px 25px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            flex: 1;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .tab-btn.active {
            border-bottom-color: #FFFF00;
            background: rgba(255, 255, 0, 0.1);
        }
        
        .tab-btn:hover {
            background: rgba(255, 255, 0, 0.1);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .empty-state {
            text-align: center;
            padding: 80px 40px;
            color: #666;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            border: 2px dashed #cccc00;
        }
        
        .empty-state h3 {
            color: #666;
            margin-bottom: 15px;
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #333300;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #FFFF00;
        }
        
        .stat-label {
            font-size: 0.9em;
            color: #cccc00;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #00FF00;
            color: #000;
            padding: 15px 25px;
            border-radius: 8px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .component-count {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #FFFF00;
            color: #000;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🚀 Pro Email Template Builder</h1>
            <p class="description">Create professional, responsive email templates with drag & drop</p>
            <p class="sub-description">No coding required • Mobile-friendly • Export ready</p>
        </header>
        
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-value" id="componentCount">0</div>
                <div class="stat-label">Components</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="templateSize">0 KB</div>
                <div class="stat-label">Template Size</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="sectionsCount">0</div>
                <div class="stat-label">Sections</div>
            </div>
        </div>
        
        <div class="builder-area">
            <!-- Components Panel -->
            <div class="components-panel">
                <h2>📦 Email Components</h2>
                <p style="color: #cccc00; margin-bottom: 25px;">Drag and drop components to build your email</p>
                
                <div class="components-grid">
                    <div class="component-item" draggable="true" data-type="header">
                        <div class="component-icon">🏢</div>
                        <div>Header</div>
                        <div class="component-desc">Company logo & navigation</div>
                    </div>
                    
                    <div class="component-item" draggable="true" data-type="hero">
                        <div class="component-icon">🎯</div>
                        <div>Hero Section</div>
                        <div class="component-desc">Main banner with CTA</div>
                    </div>
                    
                    <div class="component-item" draggable="true" data-type="text">
                        <div class="component-icon">📝</div>
                        <div>Text Content</div>
                        <div class="component-desc">Rich text editor</div>
                    </div>
                    
                    <div class="component-item" draggable="true" data-type="image">
                        <div class="component-icon">🖼️</div>
                        <div>Image</div>
                        <div class="component-desc">Image with caption</div>
                    </div>
                    
                    <div class="component-item" draggable="true" data-type="button">
                        <div class="component-icon">🔘</div>
                        <div>Button</div>
                        <div class="component-desc">Call-to-action button</div>
                    </div>
                    
                    <div class="component-item" draggable="true" data-type="features">
                        <div class="component-icon">⭐</div>
                        <div>Features Grid</div>
                        <div class="component-desc">3-column features</div>
                    </div>
                    
                    <div class="component-item" draggable="true" data-type="testimonial">
                        <div class="component-icon">💬</div>
                        <div>Testimonial</div>
                        <div class="component-desc">Customer reviews</div>
                    </div>
                    
                    <div class="component-item" draggable="true" data-type="footer">
                        <div class="component-icon">📄</div>
                        <div>Footer</div>
                        <div class="component-desc">Links & copyright</div>
                    </div>
                </div>
                
                <div style="margin-top: 40px;">
                    <h3>💾 Quick Templates</h3>
                    <div class="template-preview">
                        <div class="template-item" data-template="newsletter">
                            📰 Newsletter Template
                        </div>
                        <div class="template-item" data-template="promotional">
                            🎁 Promotional Email
                        </div>
                        <div class="template-item" data-template="welcome">
                            👋 Welcome Email
                        </div>
                        <div class="template-item" data-template="notification">
                            🔔 Notification Email
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Preview Panel -->
            <div class="preview-panel">
                <h2>👀 Live Preview</h2>
                <div class="email-preview">
                    <div class="email-container" id="emailContainer">
                        <div class="empty-state">
                            <h3>Start Building Your Email</h3>
                            <p>Drag components from the left panel or choose a template to begin</p>
                            <div style="font-size: 48px; margin: 20px 0;">📧</div>
                            <p style="color: #cccc00; font-size: 0.9em;">Pro Tip: Start with a Header and end with a Footer</p>
                        </div>
                    </div>
                </div>
                
                <div class="buttons">
                    <button onclick="previewEmail()">
                        <span>👁️</span> Preview Email
                    </button>
                    <button class="primary" onclick="generateCode()">
                        <span>💻</span> Generate HTML
                    </button>
                </div>
                
                <div class="code-preview" id="codePreview">
                    <!-- Generated HTML code will appear here -->
                </div>
            </div>
            
            <!-- Settings Panel -->
            <div class="settings-panel">
                <h2>⚙️ Design Settings</h2>
                
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="openTab('layout-tab')">Layout</button>
                    <button class="tab-btn" onclick="openTab('colors-tab')">Colors</button>
                    <button class="tab-btn" onclick="openTab('typography-tab')">Typography</button>
                </div>
                
                <div id="layout-tab" class="tab-content active">
                    <div class="settings-group">
                        <label for="emailWidth">Email Width (px)</label>
                        <input type="number" id="emailWidth" value="600" min="400" max="800">
                    </div>
                    
                    <div class="settings-group">
                        <label for="containerPadding">Container Padding (px)</label>
                        <input type="number" id="containerPadding" value="20" min="0" max="50">
                    </div>
                    
                    <div class="settings-group">
                        <label for="fontFamily">Font Family</label>
                        <select id="fontFamily">
                            <option value="Arial, sans-serif">Arial</option>
                            <option value="Helvetica, sans-serif">Helvetica</option>
                            <option value="Georgia, serif">Georgia</option>
                            <option value="'Times New Roman', serif">Times New Roman</option>
                            <option value="Verdana, sans-serif">Verdana</option>
                            <option value="'Segoe UI', Tahoma, sans-serif">Segoe UI</option>
                        </select>
                    </div>
                </div>
                
                <div id="colors-tab" class="tab-content">
                    <div class="settings-group">
                        <label>Background Color</label>
                        <div class="color-picker">
                            <input type="color" id="bgColor" value="#ffffff">
                            <div class="color-box" style="background-color: #ffffff;" onclick="document.getElementById('bgColor').click()"></div>
                        </div>
                    </div>
                    
                    <div class="settings-group">
                        <label>Text Color</label>
                        <div class="color-picker">
                            <input type="color" id="textColor" value="#333333">
                            <div class="color-box" style="background-color: #333333;" onclick="document.getElementById('textColor').click()"></div>
                        </div>
                    </div>
                    
                    <div class="settings-group">
                        <label>Primary Color</label>
                        <div class="color-picker">
                            <input type="color" id="primaryColor" value="#007bff">
                            <div class="color-box" style="background-color: #007bff;" onclick="document.getElementById('primaryColor').click()"></div>
                        </div>
                    </div>
                    
                    <div class="settings-group">
                        <label>Secondary Color</label>
                        <div class="color-picker">
                            <input type="color" id="secondaryColor" value="#6c757d">
                            <div class="color-box" style="background-color: #6c757d;" onclick="document.getElementById('secondaryColor').click()"></div>
                        </div>
                    </div>
                </div>
                
                <div id="typography-tab" class="tab-content">
                    <div class="settings-group">
                        <label for="fontSize">Base Font Size (px)</label>
                        <input type="number" id="fontSize" value="16" min="12" max="24">
                    </div>
                    
                    <div class="settings-group">
                        <label for="lineHeight">Line Height</label>
                        <input type="number" id="lineHeight" value="1.6" step="0.1" min="1" max="2">
                    </div>
                    
                    <div class="settings-group">
                        <label for="headingSize">Heading Size Scale</label>
                        <select id="headingSize">
                            <option value="normal">Normal</option>
                            <option value="large">Large</option>
                            <option value="xlarge">Extra Large</option>
                        </select>
                    </div>
                </div>
                
                <div class="buttons">
                    <button onclick="resetDesign()">
                        <span>🔄</span> Reset All
                    </button>
                    <button class="primary" onclick="exportTemplate()">
                        <span>📤</span> Export Template
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        let emailComponents = [];
        let currentSectionId = 0;

        // Initialize the application
        function initApp() {
            setupDragAndDrop();
            setupEventListeners();
            updateStats();
        }

        // Setup drag and drop functionality
        function setupDragAndDrop() {
            document.querySelectorAll('.component-item').forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
            });

            const emailContainer = document.getElementById('emailContainer');
            emailContainer.addEventListener('dragover', handleDragOver);
            emailContainer.addEventListener('drop', handleDrop);
            emailContainer.addEventListener('dragenter', handleDragEnter);
            emailContainer.addEventListener('dragleave', handleDragLeave);
        }

        // Setup event listeners for settings
        function setupEventListeners() {
            // Color pickers
            document.querySelectorAll('input[type="color"]').forEach(picker => {
                picker.addEventListener('input', function() {
                    const colorBox = this.parentNode.querySelector('.color-box');
                    colorBox.style.backgroundColor = this.value;
                    applyDesignSettings();
                });
            });

            // Layout settings
            document.getElementById('emailWidth').addEventListener('input', function() {
                document.getElementById('emailContainer').style.maxWidth = this.value + 'px';
                updateStats();
            });

            document.getElementById('containerPadding').addEventListener('input', function() {
                document.getElementById('emailContainer').style.padding = this.value + 'px';
            });

            // Typography settings
            document.getElementById('fontSize').addEventListener('input', applyDesignSettings);
            document.getElementById('fontFamily').addEventListener('change', applyDesignSettings);
            document.getElementById('lineHeight').addEventListener('input', applyDesignSettings);

            // Templates
            document.querySelectorAll('.template-item').forEach(item => {
                item.addEventListener('click', function() {
                    const templateType = this.getAttribute('data-template');
                    loadTemplate(templateType);
                    showNotification(`📋 "${this.textContent.trim()}" template loaded!`);
                });
            });
        }

        // Drag and drop handlers
        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.getAttribute('data-type'));
            e.target.style.opacity = '0.6';
        }

        function handleDragEnd(e) {
            e.target.style.opacity = '1';
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDragEnter(e) {
            e.preventDefault();
            e.currentTarget.style.border = '3px dashed #FFFF00';
            e.currentTarget.style.background = 'rgba(255, 255, 0, 0.05)';
        }

        function handleDragLeave(e) {
            e.currentTarget.style.border = '3px solid #444400';
            e.currentTarget.style.background = 'white';
        }

        function handleDrop(e) {
            e.preventDefault();
            handleDragLeave(e);
            
            const componentType = e.dataTransfer.getData('text/plain');
            addComponentToEmail(componentType);
            showNotification(`✅ ${getComponentName(componentType)} added successfully!`);
        }

        function getComponentName(type) {
            const names = {
                'header': 'Header',
                'hero': 'Hero Section',
                'text': 'Text Content',
                'image': 'Image',
                'button': 'Button',
                'features': 'Features Grid',
                'testimonial': 'Testimonial',
                'footer': 'Footer'
            };
            return names[type] || 'Component';
        }

        function addComponentToEmail(type) {
            currentSectionId++;
            const sectionId = 'section-' + currentSectionId;
            
            let componentHTML = '';
            let componentData = { id: sectionId, type: type };

            switch(type) {
                case 'header':
                    componentHTML = `
                        <div class="email-section" id="${sectionId}">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('${sectionId}')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('${sectionId}')">🗑️ Delete</button>
                            </div>
                            <div style="text-align: center; padding: 25px; background: #f8f9fa; border-bottom: 3px solid #e9ecef;">
                                <h1 style="color: #333; margin: 0; font-size: 28px;">Your Company Logo</h1>
                                <p style="color: #666; margin: 8px 0 0 0; font-size: 16px;">Your company tagline or value proposition</p>
                            </div>
                        </div>
                    `;
                    break;

                case 'hero':
                    componentHTML = `
                        <div class="email-section" id="${sectionId}">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('${sectionId}')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('${sectionId}')">🗑️ Delete</button>
                            </div>
                            <div style="text-align: center; padding: 60px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                                <h2 style="margin: 0 0 20px 0; font-size: 36px; font-weight: bold;">Amazing Headline Here</h2>
                                <p style="margin: 0 0 30px 0; font-size: 20px; opacity: 0.9;">Compelling subheading that describes your offer in detail</p>
                                <a href="#" style="display: inline-block; background: #FFD700; color: #000; padding: 15px 40px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 18px; transition: all 0.3s ease;">Get Started Now</a>
                            </div>
                        </div>
                    `;
                    break;

                case 'text':
                    componentHTML = `
                        <div class="email-section" id="${sectionId}">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('${sectionId}')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('${sectionId}')">🗑️ Delete</button>
                            </div>
                            <div style="padding: 40px 30px;">
                                <h3 style="color: #333; margin-bottom: 20px; font-size: 24px;">Engaging Content Heading</h3>
                                <p style="color: #555; line-height: 1.7; margin-bottom: 15px;">This is where you put your main content. You can describe your products, services, or share important information with your subscribers. Make it valuable and engaging.</p>
                                <p style="color: #555; line-height: 1.7;">Ensure your content is relevant to your audience to increase engagement and drive conversions. Use clear language and focus on benefits.</p>
                            </div>
                        </div>
                    `;
                    break;

                case 'image':
                    componentHTML = `
                        <div class="email-section" id="${sectionId}">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('${sectionId}')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('${sectionId}')">🗑️ Delete</button>
                            </div>
                            <div style="text-align: center; padding: 30px;">
                                <img src="https://via.placeholder.com/550x300/007bff/ffffff?text=Your+Image+Here" alt="Sample Image" style="max-width: 100%; height: auto; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                                <p style="color: #666; margin-top: 15px; font-style: italic; font-size: 14px;">Image caption or description goes here to provide context</p>
                            </div>
                        </div>
                    `;
                    break;

                case 'button':
                    componentHTML = `
                        <div class="email-section" id="${sectionId}">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('${sectionId}')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('${sectionId}')">🗑️ Delete</button>
                            </div>
                            <div style="text-align: center; padding: 30px;">
                                <a href="#" style="display: inline-block; background: #007bff; color: white; padding: 18px 45px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 18px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0,123,255,0.3);">Call to Action</a>
                                <p style="color: #666; margin-top: 15px; font-size: 14px;">Click the button above to take action</p>
                            </div>
                        </div>
                    `;
                    break;

                case 'features':
                    componentHTML = `
                        <div class="email-section" id="${sectionId}">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('${sectionId}')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('${sectionId}')">🗑️ Delete</button>
                            </div>
                            <div style="padding: 50px 30px; text-align: center; background: #f8f9fa;">
                                <h3 style="color: #333; margin-bottom: 40px; font-size: 28px;">Why Choose Us?</h3>
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; margin-top: 20px;">
                                    <div style="padding: 25px;">
                                        <div style="font-size: 48px; margin-bottom: 20px;">🚀</div>
                                        <h4 style="color: #333; margin-bottom: 15px;">Fast Performance</h4>
                                        <p style="color: #666; line-height: 1.6;">Lightning fast performance that exceeds expectations and delivers results.</p>
                                    </div>
                                    <div style="padding: 25px;">
                                        <div style="font-size: 48px; margin-bottom: 20px;">🔒</div>
                                        <h4 style="color: #333; margin-bottom: 15px;">Bank-Level Security</h4>
                                        <p style="color: #666; line-height: 1.6;">Enterprise-grade security measures to protect your data and privacy.</p>
                                    </div>
                                    <div style="padding: 25px;">
                                        <div style="font-size: 48px; margin-bottom: 20px;">💡</div>
                                        <h4 style="color: #333; margin-bottom: 15px;">Smart Features</h4>
                                        <p style="color: #666; line-height: 1.6;">Intelligent features that adapt to your needs and workflow seamlessly.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;

                case 'testimonial':
                    componentHTML = `
                        <div class="email-section" id="${sectionId}">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('${sectionId}')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('${sectionId}')">🗑️ Delete</button>
                            </div>
                            <div style="padding: 50px 30px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; text-align: center;">
                                <h3 style="margin-bottom: 40px; font-size: 28px;">What Our Customers Say</h3>
                                <div style="max-width: 600px; margin: 0 auto;">
                                    <p style="font-style: italic; font-size: 20px; line-height: 1.6; margin-bottom: 25px;">"This product completely transformed how we work. The results have been incredible and beyond our expectations. Highly recommended!"</p>
                                    <p style="font-weight: bold; font-size: 18px; margin-top: 25px;">- John Doe, CEO at Example Corp</p>
                                </div>
                            </div>
                        </div>
                    `;
                    break;

                case 'footer':
                    componentHTML = `
                        <div class="email-section" id="${sectionId}">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('${sectionId}')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('${sectionId}')">🗑️ Delete</button>
                            </div>
                            <div style="text-align: center; padding: 40px 30px; background: #2c3e50; color: #ecf0f1; font-size: 14px;">
                                <p style="margin: 0 0 15px 0; font-size: 16px; font-weight: bold;">Your Company Name</p>
                                <p style="margin: 0 0 20px 0; opacity: 0.8;">123 Business Street, Suite 100, City, State 12345</p>
                                <div style="margin: 20px 0;">
                                    <a href="#" style="color: #3498db; text-decoration: none; margin: 0 15px;">Website</a>
                                    <a href="#" style="color: #3498db; text-decoration: none; margin: 0 15px;">Contact</a>
                                    <a href="#" style="color: #3498db; text-decoration: none; margin: 0 15px;">Support</a>
                                </div>
                                <div style="margin: 20px 0; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
                                    <p style="margin: 0 0 10px 0;">© 2024 Your Company. All rights reserved.</p>
                                    <p style="margin: 0;">
                                        <a href="#" style="color: #3498db; text-decoration: none; margin: 0 10px;">Unsubscribe</a> | 
                                        <a href="#" style="color: #3498db; text-decoration: none; margin: 0 10px;">Privacy Policy</a> | 
                                        <a href="#" style="color: #3498db; text-decoration: none; margin: 0 10px;">Terms of Service</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
            }

            // Append to email container
            const emailContainer = document.getElementById('emailContainer');
            
            // Remove empty state if it's the first component
            if (emailContainer.querySelector('.empty-state')) {
                emailContainer.innerHTML = '';
            }
            
            // Append the new component
            emailContainer.innerHTML += componentHTML;
            
            // Store component data
            componentData.html = componentHTML;
            emailComponents.push(componentData);
            
            // Update statistics
            updateStats();
        }

        function deleteSection(sectionId) {
            if (confirm('Are you sure you want to delete this section?')) {
                document.getElementById(sectionId).remove();
                emailComponents = emailComponents.filter(comp => comp.id !== sectionId);
                
                // Show empty state if no components left
                if (emailComponents.length === 0) {
                    document.getElementById('emailContainer').innerHTML = `
                        <div class="empty-state">
                            <h3>Start Building Your Email</h3>
                            <p>Drag components from the left panel or choose a template to begin</p>
                            <div style="font-size: 48px; margin: 20px 0;">📧</div>
                            <p style="color: #cccc00; font-size: 0.9em;">Pro Tip: Start with a Header and end with a Footer</p>
                        </div>
                    `;
                }
                
                updateStats();
                showNotification('🗑️ Section deleted successfully!');
            }
        }

        function editSection(sectionId) {
            const section = document.getElementById(sectionId);
            const currentContent = section.querySelector('div:last-child').textContent;
            const newContent = prompt('Edit this section content:', currentContent);
            if (newContent && newContent.trim() !== '') {
                section.querySelector('div:last-child').innerHTML = newContent;
                showNotification('✏️ Section updated successfully!');
            }
        }

        function previewEmail() {
            const emailHTML = document.getElementById('emailContainer').innerHTML;
            if (emailComponents.length === 0) {
                alert('Please add some components first!');
                return;
            }
            
            const previewWindow = window.open('', '_blank');
            previewWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Email Preview - Pro Email Builder</title>
                    <style>
                        body { 
                            font-family: Arial, sans-serif; 
                            margin: 0; 
                            padding: 40px; 
                            background: #f5f5f5; 
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            min-height: 100vh;
                        }
                        .preview-container { 
                            max-width: 800px; 
                            width: 100%;
                            background: white; 
                            padding: 30px; 
                            border-radius: 15px; 
                            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
                            border: 2px solid #e0e0e0;
                        }
                        .preview-header {
                            text-align: center;
                            margin-bottom: 30px;
                            padding-bottom: 20px;
                            border-bottom: 2px solid #f0f0f0;
                        }
                        .preview-header h1 {
                            color: #333;
                            margin: 0;
                        }
                    </style>
                </head>
                <body>
                    <div class="preview-container">
                        <div class="preview-header">
                            <h1>📧 Email Preview</h1>
                            <p>This is how your email will look to recipients</p>
                        </div>
                        ${emailHTML}
                    </div>
                </body>
                </html>
            `);
            previewWindow.document.close();
            showNotification('👁️ Email preview opened in new window!');
        }

        function generateCode() {
            if (emailComponents.length === 0) {
                alert('Please add some components first!');
                return;
            }
            
            const emailHTML = document.getElementById('emailContainer').innerHTML;
            const fullEmailTemplate = `<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Email Template</title>
    <style>
        body { 
            margin: 0; 
            padding: 0; 
            background: #f5f5f5; 
            font-family: Arial, sans-serif; 
            -webkit-font-smoothing: antialiased;
        }
        .email-container { 
            max-width: 600px; 
            margin: 0 auto; 
            background: white; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        @media only screen and (max-width: 620px) {
            .email-container { 
                width: 100% !important; 
            }
            img {
                max-width: 100% !important;
                height: auto !important;
            }
            .mobile-stack {
                display: block !important;
                width: 100% !important;
            }
        }
        a {
            color: #007bff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="email-container">
        ${emailHTML}
    </div>
</body>
</html>`;

            document.getElementById('codePreview').style.display = 'block';
            document.getElementById('codePreview').textContent = fullEmailTemplate;
            showNotification('💻 HTML code generated successfully!');
        }

        function exportTemplate() {
            if (emailComponents.length === 0) {
                alert('Please build an email template first!');
                return;
            }
            
            generateCode();
            const code = document.getElementById('codePreview').textContent;
            const blob = new Blob([code], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'professional-email-template.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showNotification('📤 Template exported successfully!');
        }

        function resetDesign() {
            if (confirm('Are you sure you want to reset everything? This will delete all your work and cannot be undone.')) {
                document.getElementById('emailContainer').innerHTML = `
                    <div class="empty-state">
                        <h3>Start Building Your Email</h3>
                        <p>Drag components from the left panel or choose a template to begin</p>
                        <div style="font-size: 48px; margin: 20px 0;">📧</div>
                        <p style="color: #cccc00; font-size: 0.9em;">Pro Tip: Start with a Header and end with a Footer</p>
                    </div>
                `;
                emailComponents = [];
                currentSectionId = 0;
                document.getElementById('codePreview').style.display = 'none';
                
                // Reset settings to default
                document.getElementById('emailWidth').value = 600;
                document.getElementById('containerPadding').value = 20;
                document.getElementById('fontFamily').value = 'Arial, sans-serif';
                document.getElementById('bgColor').value = '#ffffff';
                document.getElementById('textColor').value = '#333333';
                document.getElementById('primaryColor').value = '#007bff';
                document.getElementById('secondaryColor').value = '#6c757d';
                document.getElementById('fontSize').value = 16;
                document.getElementById('lineHeight').value = 1.6;
                document.getElementById('headingSize').value = 'normal';
                
                applyDesignSettings();
                updateStats();
                showNotification('🔄 Design reset to default!');
            }
        }

        function openTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show the selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Activate the clicked tab button
            event.currentTarget.classList.add('active');
        }

        function loadTemplate(templateType) {
            let templateHTML = '';
            
            switch(templateType) {
                case 'newsletter':
                    templateHTML = `
                        <div class="email-section" id="section-1">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('section-1')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('section-1')">🗑️ Delete</button>
                            </div>
                            <div style="text-align: center; padding: 25px; background: #f8f9fa; border-bottom: 3px solid #e9ecef;">
                                <h1 style="color: #333; margin: 0; font-size: 28px;">Monthly Newsletter</h1>
                                <p style="color: #666; margin: 8px 0 0 0; font-size: 16px;">Stay updated with our latest news and insights</p>
                            </div>
                        </div>
                        <div class="email-section" id="section-2">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('section-2')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('section-2')">🗑️ Delete</button>
                            </div>
                            <div style="padding: 40px 30px;">
                                <h3 style="color: #333; margin-bottom: 20px; font-size: 24px;">Featured Article of the Month</h3>
                                <p style="color: #555; line-height: 1.7; margin-bottom: 15px;">Welcome to our monthly newsletter! We're excited to share the latest updates, insights, and opportunities with you. This month, we're focusing on innovation and growth.</p>
                                <p style="color: #555; line-height: 1.7;">Our team has been working hard to bring you new features and improvements. We value your feedback and would love to hear your thoughts.</p>
                            </div>
                        </div>
                        <div class="email-section" id="section-3">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('section-3')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('section-3')">🗑️ Delete</button>
                            </div>
                            <div style="text-align: center; padding: 30px;">
                                <a href="#" style="display: inline-block; background: #007bff; color: white; padding: 18px 45px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 18px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0,123,255,0.3);">Read Full Article</a>
                            </div>
                        </div>
                        <div class="email-section" id="section-4">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('section-4')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('section-4')">🗑️ Delete</button>
                            </div>
                            <div style="text-align: center; padding: 40px 30px; background: #2c3e50; color: #ecf0f1; font-size: 14px;">
                                <p style="margin: 0 0 15px 0; font-size: 16px; font-weight: bold;">Company Newsletter</p>
                                <p style="margin: 0 0 20px 0; opacity: 0.8;">123 Business Street, Suite 100, City, State 12345</p>
                                <div style="margin: 20px 0; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
                                    <p style="margin: 0 0 10px 0;">© 2024 Company Name. All rights reserved.</p>
                                    <p style="margin: 0;">
                                        <a href="#" style="color: #3498db; text-decoration: none; margin: 0 10px;">Unsubscribe</a> | 
                                        <a href="#" style="color: #3498db; text-decoration: none; margin: 0 10px;">Privacy Policy</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'promotional':
                    templateHTML = `
                        <div class="email-section" id="section-1">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('section-1')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('section-1')">🗑️ Delete</button>
                            </div>
                            <div style="text-align: center; padding: 60px 30px; background: linear-gradient(135deg, #ff6b6b, #ee5a24); color: white;">
                                <h2 style="margin: 0 0 20px 0; font-size: 36px; font-weight: bold;">Special Offer Inside! 🎁</h2>
                                <p style="margin: 0 0 30px 0; font-size: 20px; opacity: 0.9;">Limited time discount on our premium products - Don't miss out!</p>
                            </div>
                        </div>
                        <div class="email-section" id="section-2">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('section-2')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('section-2')">🗑️ Delete</button>
                            </div>
                            <div style="text-align: center; padding: 50px 30px;">
                                <h3 style="color: #333; margin-bottom: 25px; font-size: 28px;">Don't Miss This Opportunity</h3>
                                <p style="color: #555; line-height: 1.7; margin-bottom: 20px; font-size: 18px;">Get exclusive access to our best deals and save big on your favorite products. This offer is available for a limited time only.</p>
                                <p style="font-size: 42px; color: #ff6b6b; font-weight: bold; margin: 30px 0;">50% OFF</p>
                                <p style="color: #666; font-size: 16px;">Use code: <strong>SAVE50</strong> at checkout</p>
                            </div>
                        </div>
                        <div class="email-section" id="section-3">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('section-3')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('section-3')">🗑️ Delete</button>
                            </div>
                            <div style="text-align: center; padding: 30px;">
                                <a href="#" style="display: inline-block; background: #ff6b6b; color: white; padding: 20px 50px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 20px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255,107,107,0.3);">Shop Now & Save</a>
                                <p style="color: #666; margin-top: 20px; font-size: 14px;">Offer expires in 48 hours • Limited quantities available</p>
                            </div>
                        </div>
                    `;
                    break;

                case 'welcome':
                    templateHTML = `
                        <div class="email-section" id="section-1">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('section-1')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('section-1')">🗑️ Delete</button>
                            </div>
                            <div style="text-align: center; padding: 60px 30px; background: linear-gradient(135deg, #4facfe, #00f2fe); color: white;">
                                <h2 style="margin: 0 0 20px 0; font-size: 36px; font-weight: bold;">Welcome Aboard! 👋</h2>
                                <p style="margin: 0 0 30px 0; font-size: 20px; opacity: 0.9;">We're excited to have you join our community</p>
                            </div>
                        </div>
                        <div class="email-section" id="section-2">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('section-2')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('section-2')">🗑️ Delete</button>
                            </div>
                            <div style="padding: 50px 30px;">
                                <h3 style="color: #333; margin-bottom: 25px; font-size: 28px;">Getting Started Guide</h3>
                                <p style="color: #555; line-height: 1.7; margin-bottom: 25px;">Thank you for signing up! We're thrilled to welcome you to our platform. Here's how to make the most of your account:</p>
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 30px;">
                                    <div style="padding: 25px; background: #f8f9fa; border-radius: 10px; text-align: center;">
                                        <div style="font-size: 36px; margin-bottom: 15px;">📝</div>
                                        <h4 style="color: #333; margin-bottom: 15px;">Complete Profile</h4>
                                        <p style="color: #666;">Set up your account and preferences</p>
                                    </div>
                                    <div style="padding: 25px; background: #f8f9fa; border-radius: 10px; text-align: center;">
                                        <div style="font-size: 36px; margin-bottom: 15px;">🔍</div>
                                        <h4 style="color: #333; margin-bottom: 15px;">Explore Features</h4>
                                        <p style="color: #666;">Discover all our powerful tools</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;

                case 'notification':
                    templateHTML = `
                        <div class="email-section" id="section-1">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('section-1')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('section-1')">🗑️ Delete</button>
                            </div>
                            <div style="text-align: center; padding: 40px 30px; background: #f8f9fa;">
                                <h2 style="color: #333; margin: 0; font-size: 28px;">Important Notification 🔔</h2>
                                <p style="color: #666; margin: 10px 0 0 0;">Please review this important information</p>
                            </div>
                        </div>
                        <div class="email-section" id="section-2">
                            <div class="section-controls">
                                <button class="control-btn" onclick="editSection('section-2')">✏️ Edit</button>
                                <button class="control-btn delete" onclick="deleteSection('section-2')">🗑️ Delete</button>
                            </div>
                            <div style="padding: 40px 30px;">
                                <h3 style="color: #333; margin-bottom: 20px; font-size: 24px;">Action Required</h3>
                                <p style="color: #555; line-height: 1.7; margin-bottom: 20px;">This is an important notification regarding your account. Please take a moment to review the following information and take appropriate action if needed.</p>
                                <div style="background: #fff3cd; border: 2px solid #ffeaa7; padding: 20px; border-radius: 8px; margin: 25px 0;">
                                    <strong style="color: #856404;">Notice:</strong> Your attention is required for this matter. Please ensure you complete the necessary steps by the specified deadline.
                                </div>
                                <p style="color: #555; line-height: 1.7;">If you have any questions or concerns, please don't hesitate to contact our support team.</p>
                            </div>
                        </div>
                    `;
                    break;
            }
            
            document.getElementById('emailContainer').innerHTML = templateHTML;
            document.getElementById('codePreview').style.display = 'none';
            
            // Update components array
            emailComponents = [];
            const sections = document.querySelectorAll('.email-section');
            sections.forEach((section, index) => {
                emailComponents.push({
                    id: section.id,
                    type: 'template-section',
                    html: section.outerHTML
                });
            });
            
            updateStats();
        }

        function applyDesignSettings() {
            const bgColor = document.getElementById('bgColor').value;
            const textColor = document.getElementById('textColor').value;
            const primaryColor = document.getElementById('primaryColor').value;
            const secondaryColor = document.getElementById('secondaryColor').value;
            const fontSize = document.getElementById('fontSize').value + 'px';
            const fontFamily = document.getElementById('fontFamily').value;
            const lineHeight = document.getElementById('lineHeight').value;
            
            const emailContainer = document.getElementById('emailContainer');
            emailContainer.style.backgroundColor = bgColor;
            emailContainer.style.color = textColor;
            emailContainer.style.fontFamily = fontFamily;
            emailContainer.style.fontSize = fontSize;
            emailContainer.style.lineHeight = lineHeight;
            
            // Update buttons and links with primary color
            document.querySelectorAll('#emailContainer a').forEach(link => {
                if (link.style.backgroundColor) {
                    link.style.backgroundColor = primaryColor;
                }
            });
        }

        function updateStats() {
            document.getElementById('componentCount').textContent = emailComponents.length;
            document.getElementById('sectionsCount').textContent = emailComponents.length;
            
            // Calculate template size
            const emailHTML = document.getElementById('emailContainer').innerHTML;
            const sizeInKB = (new Blob([emailHTML]).size / 1024).toFixed(2);
            document.getElementById('templateSize').textContent = sizeInKB + ' KB';
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Initialize the application when page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
